<html>
    <head>
        <meta charset="utf-8">
        <title>スマホHT化検証</title>
        <link rel="canonical" href="https://meira-s-nishiyama.github.io/HTPoC/" />
        <link rel="manifest" href="/HTPoC/manifest.webmanifest" />
        <link rel="apple-touch-icon" sizes="180x180" href="icon-192x192.png">
        <link rel="stylesheet" href="style.css" />
        <script defer src="/HTPoC/lib/jsQR.js"></script>
        <script defer src="/HTPoC/lib/StdScript.js"></script>
        <script defer src="/HTPoC/script.js"></script>
    </head>

    <body>


<! ================================================================ !>
<! タイトル                                                         !>
<! ================================================================ !>
        <h1>スマホHT化検証</h1>
        <h4>※図面表示は通信テストのためです。</h4>
<! ================================================================ !>


<! ================================================================ !>
<! QR読取                                                           !>
<! ================================================================ !>
<!--
        <video id="video_camera" controls playsinline muted autoplay hidden></video>
-->
        <video id="video_camera" controls playsinline muted autoplay></video>

        <div id="div_cameraMsg">🎥 カメラを使用することができません。カメラが接続されているか、確認して下さい。</div>
        <canvas id="canvas_video" hidden></canvas>

        <button type="button" id="button_scan">QR読取</button>

        <div id="div_recognition" hidden>
            <div id="div_recognitionMsg">QRコードが見つかりません。</div>
            <div hidden><b>工程票QR:</b> <span id="div_qrCode"></span></div>
        </div>
<! ================================================================ !>


<! ================================================================ !>
<! 図面                                                             !>
<! ================================================================ !>
        <table id="table_documents">
            <tbody>
            </tbody>
            <template>
                <tr>
                    <td class="Document">
                        <button type="button"></button>
                    </td>
                </tr>
            </template>
        </table>

        <img id="img_document" />
<! ================================================================ !>


<! ================================================================ !>
<! モーダルウィンドウ                                               !>
<! ================================================================ !>
        <section id="section_modal">

            <section class="ModalSmoke" id="modal_smoke"></section>

            <section class="Modal" id="modal_info">
                <p id="msg_info"></p>
                <button id="button_modalInfoClose" type="button" onclick="ModalInfo_close()">閉じる</button>
            </section>

            <section class="Modal" id="modal_err">
                <p>エラー！</p>
                <p id="msg_err"></p>
                <table>
                    <tbody id="tbody_err">
                        <tr></tr>
                    </tbody>
                </table>
                <button id="button_modalErrClose" type="button" onclick="ModalErr_close()">閉じる</button>
            </section>

            <section class="ModalLoading" id="modal_loading">
                <section class="DialogTitle">
                    <p>おまちください。</p>
                </section>
                <progress></progress>
            </section>

        </section>
<! ================================================================ !>

    <script>
      if (navigator.serviceWorker) {
        navigator.serviceWorker.register (
          '/HTPoC/sw.js',
          {scope: '/HTPoC/'}
        )
      }

window.addEventListener("load", Page_init);
document.getElementById("button_scan").addEventListener("click", Scan_start);

    </script>

    </body>
</html>
